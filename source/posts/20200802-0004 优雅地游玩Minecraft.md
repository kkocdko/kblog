```
title: 优雅地游玩Minecraft
date: 2020-08-02 00:04
category: Tutorial
tags: Game Java Minecraft Windows
description: 提升性能+便携化
```

> 仅适用于[Minecraft Java Edition](https://minecraft.net/store/minecraft-java-edition)和Windows平台。其他平台也可参考。

### Why

* 原版Minecraft启动器自带的JRE版本停留在`1.8 (Java 8)`。其性能相对落后。

* 近几个版本的Minecraft优化十分糟糕。

* 原版启动器直接将JRE安装在当前系统，对于需要多版本Java的用户或开发者非常不友好，且无法实现便携化。

### Principle

使用新版OpenJDK、OpenJFX，启动器选用HMCL，附加Sodium、Lithium、Phosphor优化Mod，写个“胶水”批处理将这些东西黏起来，再写个简单程序来隐藏CMD窗口，给快捷方式提供图标。

### How

下载本人提供的模板：

<https://lanzous.com/b00zplcdc>

找个位置解压，然后补齐各个组件：

* [AdoptOpenJDK](https://adoptopenjdk.net)：选择`Java 11`->`Hotspot`->`Windows 64`->`JRE`->`.zip`，解压到`./jre`。

* [OpenJFX](https://openjfx.io)：选择`OpenJFX 11`->`Windows 64`->`SDK`，解压到`./jfx`。

* [HMCL](https://github.com/huanghongxun/HMCL)：选择`.jar`的构建，重命名为`hmcl.jar`后置于`./`。

* [Sodium](https://github.com/jellysquid3/sodium-fabric)：置于`./.minecraft/mods`。

* [Lithium](https://github.com/jellysquid3/lithium-fabric)：置于`./.minecraft/mods`。

* [Phosphor](https://github.com/jellysquid3/phosphor-fabricc)：置于`./.minecraft/mods`。

运行`/Minecraft.exe`，点击左侧栏“版本列表”，再点击顶部“安装新游戏版本”，选择最新的稳定版本，同时选择安装Fabric。

等待安装完成之后，回到主页面启动Minecraft即可。

<details>
<summary>点此展开冗长的细节（一般用户无需了解）</summary>

---

如果你十分激进，也可以选择`Java 14`。然而当前（`20200801`）HMCL仍然不支持Java14，因此可能需要为Minecraft和HMCL指定不同的Java版本。

如果你需要安装极多模组，或是十分在意内存占用，可以选用`OpenJ9`以代替默认的`Hotspot` JVM，能省下很多内存。但请注意，这是“牺牲时间换取空间”，通常会导致更高的CPU占用。

将HMCL设置为“游戏启动后结束启动器”，可以省下`150MB`左右的内存。

若要追求极致的启动速度（跳过启动器），可以使用HMCL中的“生成启动脚本”功能，然后将脚本命名为`launch.bat`，原有的同名文件改个别的名字备用（将失去便携化功能，可以自行修改批处理中的路径来恢复便携化）。

模板中`Minecraft.exe`的源码（使用`tcc`编译）：
```c
#include <windows.h>

void main()
{
    ShellExecute(NULL, NULL, "launch.bat", NULL, NULL, SW_HIDE);
    SetFocus(FindWindow("Shell_TrayWnd", NULL)); // Insure the HMCL window on top
}
```
如遇报毒请自行考虑。

其他源码可以在模板中获取。

---

</details>
