<!DOCTYPE html>

<head>
  <base href="/toy/base64/" />
  <script
    :name="Base64"
    :description="Encode local file to base64."
    :version="0.1.1"
    src="../veps.js"
  ></script>
</head>

<style>
  label {
    display: block;
    width: 60vmin;
    max-width: 300px;
    text-align: center;
    margin: auto;
    border: 1px solid #777;
    padding: 4px 8px;
  }
  #\$i {
    display: none;
  }
  #\$o {
    width: 2em;
    position: fixed;
    top: -100vh;
  }
</style>

<body>
  <label>
    <input id="$i" type="file" autocomplete="off" />
    Select file
  </label>
  <input id="$o" readonly spellcheck="false" autocomplete="off" />
  <div id="$svg"></div>
</body>

<script>
  // setTimeout(() => location.reload(), 1000);
  // 1-3 空格
  $i.onchange = () => {
    if ($i.files[0].size > 1024 ** 2 * 1)
      return alert("Input file must small than 1 MB"); // TODO: Big file
    const reader = new FileReader();
    reader.onload = () => {
      $o.value = reader.result;
      $o.select();
      document.execCommand("copy");
      alert("copied");
    };
    reader.readAsDataURL($i.files[0]);
  };
</script>
