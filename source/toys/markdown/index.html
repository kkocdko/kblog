<!DOCTYPE html>

<head>
  <base href="/toy/markdown/" />
  <script
    :name="Markdown"
    :description="Simple markdown preview."
    :version="0.1.5"
    src="../veps.js"
  ></script>
  <link
    rel="stylesheet"
    href="//cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"
  />
  <script src="//cdn.jsdelivr.net/npm/marked@2.1.3/marked.min.js"></script>
</head>

<style>
  #\$i {
    width: 100%;
    height: 60vh;
    padding: 5px;
    margin-bottom: -5px;
    font-family: monospace;
    resize: vertical;
    border: 1px solid #777;
  }
  #\$o {
    background: #fffc;
  }
  #\$tips {
    padding: 0 5px;
    margin: 0;
    color: #fffd;
    background: #e08700f0;
    opacity: 0;
    animation: tips cubic-bezier(1, 0, 1, 0) 2s;
  }
  @keyframes tips {
    0% {
      opacity: 1;
    }
  }
</style>

<body>
  <textarea id="$i" spellcheck="false"></textarea>
  <p id="$tips">Click here to hide or show input box</p>
  <div id="$o"></div>
</body>

<script>
  const oRoot = $o.attachShadow({ mode: "open" });
  oRoot.innerHTML = `<link rel=stylesheet href="//cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><div id=o class=markdown-body></div>`;
  const o = oRoot.querySelector("#o");
  $tips.onclick = () => {
    $i.style.display = $i.style.display === "none" ? "" : "none";
  };
  $i.oninput = () => {
    o.innerHTML = marked($i.value || "Compiled result will be here.");
  };
  $i.oninput();
</script>
